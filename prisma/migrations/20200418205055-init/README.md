# Migration `20200418205055-init`

This migration has been generated by hanwool kim at 4/18/2020, 8:50:55 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "default$default"."User" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "email" text  NOT NULL ,
    "id" text  NOT NULL ,
    "name" text   ,
    "password" text   ,
    "updatedAt" timestamp(3)  NOT NULL ,
    "username" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "default$default"."Product" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "engName" text  NOT NULL ,
    "id" text  NOT NULL ,
    "korName" text  NOT NULL ,
    "symbol" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "default$default"."Board" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "id" text  NOT NULL ,
    "productId" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "default$default"."Post" (
    "boardId" text  NOT NULL ,
    "content" text  NOT NULL ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "id" text  NOT NULL ,
    "title" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    "userId" text  NOT NULL ,
    "viewsCount" integer  NOT NULL DEFAULT 0,
    PRIMARY KEY ("id")
) 

CREATE TABLE "default$default"."PostLike" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "id" text  NOT NULL ,
    "postId" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    "userId" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "default$default"."Comment" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "id" text  NOT NULL ,
    "postId" text  NOT NULL ,
    "text" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    "userId" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "default$default"."CommentLike" (
    "commentId" text  NOT NULL ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "id" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    "userId" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "User.email" ON "default$default"."User"("email")

CREATE UNIQUE INDEX "User.username" ON "default$default"."User"("username")

CREATE UNIQUE INDEX "Product.engName" ON "default$default"."Product"("engName")

CREATE UNIQUE INDEX "Product.korName" ON "default$default"."Product"("korName")

CREATE UNIQUE INDEX "Product.symbol" ON "default$default"."Product"("symbol")

CREATE UNIQUE INDEX "Board_productId" ON "default$default"."Board"("productId")

ALTER TABLE "default$default"."Board" ADD FOREIGN KEY ("productId")REFERENCES "default$default"."Product"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."Post" ADD FOREIGN KEY ("boardId")REFERENCES "default$default"."Board"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."Post" ADD FOREIGN KEY ("userId")REFERENCES "default$default"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."PostLike" ADD FOREIGN KEY ("postId")REFERENCES "default$default"."Post"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."PostLike" ADD FOREIGN KEY ("userId")REFERENCES "default$default"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."Comment" ADD FOREIGN KEY ("postId")REFERENCES "default$default"."Post"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."Comment" ADD FOREIGN KEY ("userId")REFERENCES "default$default"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."CommentLike" ADD FOREIGN KEY ("commentId")REFERENCES "default$default"."Comment"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "default$default"."CommentLike" ADD FOREIGN KEY ("userId")REFERENCES "default$default"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200418205055-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,88 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+model User {
+  id           String    @id @default(cuid())
+  email        String        @unique
+  name         String?
+  password     String?
+  username     String?       @unique
+  comments     Comment[]
+  commentLikes CommentLike[]
+  posts        Post[]
+  postLikes    PostLike[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Product {
+  id        String    @id @default(cuid())
+  engName   String   @unique
+  korName   String   @unique
+  symbol    String   @unique
+  board     Board?
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Board {
+  id        String    @id @default(cuid())
+  posts     Post[]
+  product   Product  @relation(fields:[productId], references: [id])
+  productId String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Post {
+  id        String    @id @default(cuid())
+  content    String
+  title      String
+  Board      Board     @relation(fields: [boardId], references: [id])
+  boardId    String
+  User       User      @relation(fields: [userId], references: [id])
+  userId     String
+  viewsCount Int  @default(0)
+  comments   Comment[]
+  postLikes  PostLike[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model PostLike {
+  id        String    @id @default(cuid())
+  Post      Post    @relation(fields: [postId], references: [id])
+  postId    String
+  User       User      @relation(fields: [userId], references: [id])
+  userId     String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Comment {
+  id        String    @id @default(cuid())
+  text        String
+  Post      Post    @relation(fields: [postId], references: [id])
+  postId    String
+  User       User      @relation(fields: [userId], references: [id])
+  userId     String
+  commentlikes CommentLike[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model CommentLike {
+  id        String    @id @default(cuid())
+  Comment   Comment @relation(fields: [commentId], references: [id])
+  commentId String
+  User      User      @relation(fields: [userId], references: [id])
+  userId    String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
```


